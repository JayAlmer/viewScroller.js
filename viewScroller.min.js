/* 
 * =================================================
 * viewScroller
 * Version: 2.0.1
 * Copyright (c) 2016 Marcin Gierczak
 * http://www.viewdesic.com
 * =================================================
 */
!function(a){a.fn.viewScroller=function(b){function I(){function c(c){return void 0===b[c]&&(b[c]=a(c)),b[c]}var b={};return{get:c}}"object"==typeof b&&(b=a.extend({animSpeedMainView:700,animSpeedSubView:700,animEffectMainView:"easeInOutCubic",animEffectSubView:"easeInOutCubic",animEffectMainViewCss3:"ease",animEffectSubViewCss3:"ease",useKeyboard:!0,useScrollbar:!1,changeWhenAnim:!0,loopMainViews:!1,loopSubViews:!1,fitToView:!0,timeToFit:1e3,fixedWidth:0,spaceMainBag:0,beforeChange:null,afterChange:null,beforeResize:null,afterResize:null},b)),a.fn.viewScroller.setAnimSpeedMainView=function(a){b.animSpeedMainView=parseInt(a,10)||700},a.fn.viewScroller.setAnimSpeedSubView=function(a){b.animSpeedSubView=parseInt(a,10)||700},a.fn.viewScroller.setAnimEffectMainView=function(a){b.animEffectMainView=a},a.fn.viewScroller.setAnimEffectSubView=function(a){b.animEffectSubView=a},a.fn.viewScroller.setAnimEffectMainViewCss3=function(a){b.animEffectMainViewCss3=a},a.fn.viewScroller.setAnimEffectSubViewCss3=function(a){b.animEffectSubViewCss3=a},a.fn.viewScroller.setUseKeyboard=function(a){a!==!0&&a!==!1||(b.useKeyboard=a)},a.fn.viewScroller.setUseScrollbar=function(a){oa(u[0],u[0].viewsData.views[0],!1,!1),a!==!0&&a!==!1||(b.useScrollbar=a),aa(),Ea(!1,!1,!1)},a.fn.viewScroller.setChangeWhenAnim=function(a){a!==!0&&a!==!1||(b.changeWhenAnim=a)},a.fn.viewScroller.setLoopMainViews=function(a){a!==!0&&a!==!1||(b.loopMainViews=a)},a.fn.viewScroller.setLoopSubViews=function(a){a!==!0&&a!==!1||(b.loopSubViews=a)},a.fn.viewScroller.setFitToView=function(a){a!==!0&&a!==!1||(b.fitToView=a)},a.fn.viewScroller.setTimeToFit=function(a){b.timeToFit=parseInt(a,10)||1e3},a.fn.viewScroller.setFixedWidth=function(a){b.fixedWidth=parseInt(a,10)||0,ia(),ea(),Ea(!1,!0,!1)},a.fn.viewScroller.setSpaceMainBag=function(a){b.spaceMainBag=parseInt(a,10)||0,ea(),Ea(!1,!0,!1)},a.fn.viewScroller.showMainView=function(a){la("next"===a?q.NEXT:q.PREV)},a.fn.viewScroller.showSubView=function(a,b){"next"===b?ka(a,q.NEXT):ka(a,q.PREV)},a.fn.viewScroller.showView=function(a){V(a,!1)};var c=".mainbag",d=".subbag",e=".mainview",f=".subview",g=".vs-anchor",h=".vs-active",j=".vs-subview-prev",k=".vs-subview-next",l=".vs-mainview-prev",m=".vs-mainview-next",n=c+">"+e,o=d+">"+f,p={MAINBAG:0,SUBBAG:1},q={NEXT:1,PREV:-1},r=0,s=[],t=0,u=[],v=!1,w="",x=!1,y=a(window),z=a(document),A=y.height(),B=y.width(),C=!1,D=!1,E=10,F=50,G=!0,H=!0,J=new I,K=function(){var a=document.createElement("p").style,b="transition"in a||"WebkitTransition"in a||"MozTransition"in a||"msTransition"in a||"OTransition"in a;return b},L=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=this.length,d=b||0,e=c;d<e;d++)if(this[d]===a)return d;return-1})},M=function(){String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1})},N=function(){return"undefined"!=typeof window.orientation},O=function(){return Math.abs(A-y.height())>100?(A=y.height(),!0):Math.abs(B-y.width())>100&&(B=y.width(),!0)},P=function(a,b){var c="#"+b.attr("vs-anchor");return"#undefined"===c&&(c=""),a+c},Q=function(){var b=[];return J.get(n).each(function(c){b.push(P(c,a(this)))}),b},R=function(b){var c=[],d=J.get(n).slice(b,b+1);d.find(J.get(o)).each(function(b){c.push(P(b,a(this)))});for(var e=0;e<c.length;)e++;return c},S=function(a){for(var b=u.length,c=0;c<b;c++)for(var d=u[c].viewsData.views.length,e=0;e<d;e++)if(u[c].viewsData.views[e].split("#")[1]===a)return c;return-1},T=function(b){var c=[];return J.get("div[vs-anchor="+b+"]").find(J.get(o)).each(function(b){c.push(a(this).attr("vs-anchor"))}),c.length>0?S(c[0]):0===c.length&&(J.get("div[vs-anchor="+b+"]").parents(J.get(d)).each(function(b){c.push(a(this).attr("class"))}),c.length>0&&c[0].includes(d.replace(".","")))?S(b):-1},U=function(){var a="",b=0;return window.location.hash.indexOf("#")>-1&&(a=window.location.hash.replace("#",""),b=T(a)),b},V=function(a,b){x=b===!0,window.location.hash=a},W=function(a,b,c){var d=new Va;return d.setBagObj(a,b,c),d},X=function(a){for(var b=[],c="",e=0,f=0,g=a.length;e<g;)b=R(e),c=a[e].split("#")[1],b.length>0&&(u.push(W(d+"|"+f+"|"+c+"|"+e,b,p.SUBBAG)),f++),e++},Y=function(){var a=Q();u.push(W(c,a,p.MAINBAG)),X(a)},Z=function(a){if(x===!1&&window.location.hash.indexOf("#")>-1){var b=window.location.hash.replace("#",""),c=$(b);"undefined"!=typeof c&&c.length>0&&oa(u[c[0]],c[1],!1,!1)}x=!1},$=function(a){for(var b=[],c=u.length,d=0;d<c;d++)for(var e=u[d].viewsData.views,f=u[d].viewsData.bagType,g=e.length,h=0;h<g;h++)if(e[h].indexOf("#")>-1&&e[h].split("#")[1]===a)return b.push(d,e[h],f),b},_=function(a,e){var f=a.viewsData.views.indexOf(a.viewsData.activeView)+e;return(b.loopSubViews&&"undefined"==typeof a.viewsData.views[f]&&a.viewsData.container.includes(d)||b.loopMainViews&&"undefined"==typeof a.viewsData.views[f]&&a.viewsData.container.includes(c))&&(f=f<0?a.viewsData.views.length-1:0),f},aa=function(){b.useScrollbar?(J.get("html").css("overflow-y","scroll"),J.get("body").css("overflow-y","")):(J.get("body").css("overflow-y","hidden"),J.get("html").css("overflow-y","hidden"))},ba=function(a,b){return b?1:a},ca=function(a){a.viewsData.viewsPos.length=0;for(var e=a.viewsData.views.length,f=0;f<e;f++)if(a.viewsData.bagType===p.SUBBAG){var g=J.get(c).width();g=0===b.fixedWidth?y.width()-b.spaceMainBag:b.fixedWidth,a.viewsData.viewsPos.push(g*f)}else a.viewsData.viewsPos.push(y.height()*f)},da=function(a){for(var b=y.scrollTop(),c=0,d=0,e=0,f=a.length,g=0;g<f;g++)d=Math.abs(a[g]-b),d<c&&(e=g),c=d;return e},ea=function(){var g=J.get(c).width();g=0===b.fixedWidth?y.width()-b.spaceMainBag:b.fixedWidth,J.get(c).css("width",g+"px");var h=y.height();J.get(e).css("height",h+"px"),J.get(f).css("width",g+"px"),J.get(d).each(function(b){a(this).css("width",g*a(this).find(f).length+"px")}),H&&J.get(c).css("height","auto")},fa=function(){J.get(d).each(function(b){a(this).addClass(d.replace(".","")+"-"+b)})},ga=function(){J.get(d).wrap('<div style="overflow: hidden; height: 100%; width: 100%;"></div>')},ha=function(){0===b.fixedWidth?J.get(c).css("width",J.get(c).width()-b.spaceMainBag+"px"):J.get(c).css("width",b.fixedWidth+"px")},ia=function(){b.fixedWidth>0&&a(J.get(c)).css({position:"absolute"})},ja=function(){a(J.get(c)).find(J.get(h)).each(function(b){0===b&&V(a(this).attr("vs-anchor"))})},ka=function(a,c){a>-1&&(b.changeWhenAnim||!b.changeWhenAnim&&!C)&&oa(u[a],"",!1,!1,c)},la=function(a){(b.changeWhenAnim||!b.changeWhenAnim&&!C)&&oa(u[0],"",!1,!1,a)},ma=function(a,c,d,e,f){if("x"===e){var g=ba(b.animSpeedMainView,!1);a.css({"-webkit-transition":"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms","-moz-transition":"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms","-o-transition":"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms",transition:"all "+g+"ms "+b.animEffectSubViewCss3+" 0ms","-webkit-transform":"translate3d("+c+"px,0,0)","-moz-transform":"translate3d("+c+"px,0,0)","-o-transform":"translate3d("+c+"px,0,0)",transform:"translate3d("+c+"px,0,0)"})}else{var h=ba(b.animSpeedMainView,!1);a.css({"-webkit-transition":"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms","-moz-transition":"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms","-o-transition":"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms",transition:"all "+h+"ms "+b.animEffectMainViewCss3+" 0ms","-webkit-transform":"translate3d(0,"+c+"px,0)","-moz-transform":"translate3d(0,"+c+"px,0)","-o-transform":"translate3d(0,"+c+"px,0)",transform:"translate3d(0,"+c+"px,0)"})}a.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){"function"==typeof f&&f()})},na=function(a,c,d,e,f){"x"===e?a.stop().animate({scrollLeft:c},ba(b.animSpeedSubView,d),b.animEffectSubView,function(){"function"==typeof f&&f()}):a.stop().animate({scrollTop:c},ba(b.animSpeedMainView,d),b.animEffectMainView,function(){"function"==typeof f&&f()})},oa=function(a,d,e,f,g){if("undefined"!=typeof g&&(d=a.viewsData.views[_(a,g)]),a.viewsData.views.length>0&&"undefined"!=typeof d){var h=a.viewsData.views.indexOf(d),i=a.viewsData.viewsPos[h],j=a.viewsData.container,k=0;if(D||v===!1&&("undefined"==typeof e&&f===!1||a.viewsData.activeView!==d&&e===!1)){var l=!1;if("function"==typeof b.beforeChange&&(l=b.beforeChange()),t++,l)return!1}if(a.viewsData.container===c?w=d.split("#")[1]:D||(e||w===a.viewsData.container.split("|")[2]||(v=!0,oa(u[0],a.viewsData.container.split("|")[3]+"#"+a.viewsData.container.split("|")[2],!1,!1)),w=a.viewsData.container.split("|")[2]),e||D||window.location.hash!==d.split("#"[1])&&V(d.split("#")[1],!0),a.viewsData.bagType===p.SUBBAG){var m=j.split("|")[0],n=j.split("|")[1];j=J.get(m+"-"+n)}else j=J.get(j);var o=j;C=!0,a.viewsData.bagType===p.SUBBAG?H?ma(o,i*-1,e,"x",function(){pa(f,a,d)}):na(o.parent(),i,e,"x",function(){pa(f,a,d)}):(f||ya(),(b.useScrollbar||f)&&H&&(o=navigator.userAgent.includes("Firefox")||navigator.userAgent.includes(".NET")||navigator.userAgent.includes("MSIE")||navigator.userAgent.includes("Windows Phone")?J.get("html"):J.get("body")),b.useScrollbar||!H?(va(),na(o,i,e,"y",function(){pa(f,a,d)})):(k=J.get("body").scrollTop(),i-=k,ma(o,i*-1,e,"y",function(){pa(f,a,d)})),b.useScrollbar||xa()),D||(a.viewsData.activeView=d,v=!1)}},pa=function(a,c,d){if(t>0&&("function"==typeof b.afterChange&&b.afterChange(),t-=1),b.useScrollbar||a){if(x=!1,Da(),y.height()!==A&&(Ea(!1,!1,!1),A=y.height()),u[0].viewsData.viewsPos.length>1&&G&&N()&&y.height()!==Math.abs(u[0].viewsData.viewsPos[0]-u[0].viewsData.viewsPos[1])){ea();for(var e=u.length,f=0;f<e;f++)ca(u[f]),oa(u[f],u[f].viewsData.activeView,!0)}Ca(),ua()}else;C=!1,D=!1},qa=function(){J.get(g).on("click",ra)},ra=function(c){c.preventDefault();var d=a(this).attr("href").replace("#",""),e=$(d);e&&e.length>0&&(b.changeWhenAnim||!b.changeWhenAnim&&!C)&&V(d)},sa=function(){y.on("hashchange",Z)},ta=function(){y.off("hashchange",Z)},ua=function(){y.on("scroll",wa)},va=function(){y.off("scroll",wa)},wa=function(a){var c=da(u[0].viewsData.viewsPos);clearTimeout(r),ta(),window.location.hash!=="#"+u[0].viewsData.views[c].split("#")[1]&&(V(u[0].viewsData.views[c].split("#")[1],!1),u[0].viewsData.activeView=u[0].viewsData.views[c]),r=setTimeout(function(){sa()},10),Array.prototype.forEach.call(s,function(a){clearTimeout(a)}),s.length=0;var e=(u[0].viewsData.viewsPos.length-1,y.scrollTop());s.push(setTimeout(function(){if(b.fitToView){var a=!0;Array.prototype.forEach.call(u[0].viewsData.viewsPos,function(b){b===e&&(a=!1)}),a&&(D=!0,oa(u[0],u[0].viewsData.activeView,!1,!1))}},b.timeToFit))},xa=function(){y.on("mousewheel",za)},ya=function(){y.off("mousewheel",za)},za=function(a,b){la(b===-1?q.NEXT:q.PREV)},Aa=function(){J.get(j).each(function(b){a(this).on("click",function(){currentBagIndex=U(),currentBagIndex>-1&&ka(currentBagIndex,q.PREV)})}),J.get(k).each(function(b){a(this).on("click",function(){currentBagIndex=U(),currentBagIndex>-1&&ka(currentBagIndex,q.NEXT)})}),J.get(l).each(function(b){a(this).on("click",function(){la(q.PREV)})}),J.get(m).each(function(b){a(this).on("click",function(){la(q.NEXT)})})},Ba=function(){var a=window;Na(a)},Ca=function(){y.on("resize",Ea)},Da=function(){y.off("resize",Ea)},Ea=function(a,c,d){if(!N()||c||N()&&O()){"function"==typeof b.beforeResize&&"undefined"==typeof d&&b.beforeResize(),ea();for(var e=u.length,f=0;f<e;f++)ca(u[f]),oa(u[f],u[f].viewsData.activeView,!0);"function"==typeof b.afterResize&&"undefined"==typeof d&&b.afterResize()}},Fa=function(){z.on("keydown",Ha)},Ha=function(a){var c=38,d=40,e=37,f=39,g=36,h=35,i=33,j=34,k=0,l=function(a){return window.event?a.keyCode:a.which?a.which:void 0},m=l(a);if(k=U(),b.useKeyboard)switch(m){case i:case c:b.useScrollbar||la(q.PREV);break;case j:case d:b.useScrollbar||la(q.NEXT);break;case f:k>-1&&ka(k,q.NEXT);break;case e:k>-1&&ka(k,q.PREV);break;case g:b.useScrollbar||V(u[0].viewsData.views[0].split("#")[1]);break;case h:b.useScrollbar||V(u[0].viewsData.views[u[0].viewsData.views.length-1].split("#")[1])}},Ia="createTouch"in document,Ja=[],Ka=0,La=0,Ma={x:null,y:null},Na=function(a){window.PointerEvent&&a.addEventListener("pointermove",Ra,!1),Ia&&(a.addEventListener("touchstart",Pa,!1),a.addEventListener("touchmove",Ra,!1),a.addEventListener("touchend",Qa,!1))},Oa=function(a){if(Ja=a.touches,Ia){Ja=a.touches;for(var b=Ja.length,c=0;c<b;c++){var d=Ja[c];Ma.x=Sa(d),Ma.y=Ta(d)}}else Ma.x=Sa(a),Ma.y=Ta(a);return Ma.x+"|"+Ma.y},Pa=function(a){var b=Oa(a).split("|");Ka=parseInt(b[0],10),La=parseInt(b[1],10)},Qa=function(a){var c=Oa(a).split("|"),d=0,e=E,f=F,g=parseInt(c[0],10),h=parseInt(c[1],10),i=parseInt(Ka+e,10),j=parseInt(Ka-e,10),k=parseInt(La+f,10),l=parseInt(La-f,10);Math.abs(g-Ka)<Math.abs(h-La)?h>k?b.useScrollbar||la(q.PREV):h<l&&(b.useScrollbar||la(q.NEXT)):(d=U(),d>-1&&(g>i?ka(d,q.PREV):g<j&&ka(d,q.NEXT)))},Ra=function(a){if(b.useScrollbar||(a.preventDefault?a.preventDefault():a.returnValue=!1),Ia){Ja=a.touches;for(var c=Ja.length,d=0;d<c;d++){var e=Ja[d];Ma.x=Sa(e),Ma.y=Ta(e)}}else Ma.x=Sa(a),Ma.y=Ta(a)},Sa=function(a){var b=a.clientX;return b},Ta=function(a){var b=a.clientY;return b},Ua=function(){L(),M(),ha(),K()||(H=!1),fa(),ga(),ea(),aa(),Y();for(var a=u.length,c=0;c<a;c++)ca(u[c]);Ea(!1,!1,!1),b.useScrollbar||xa(),ja(),Z(),qa(),sa(),ua(),Ca(),Ba(),Aa(),b.useKeyboard&&Fa(),ia()},Va=function(){var a={activeView:"",container:"",bagType:p.MAINBAG,views:[],viewsPos:[]},b=function(b,c,d){a.container=b,a.views=c,a.bagType=d,a.activeView=a.views[0]};return{setBagObj:b,viewsData:a}};Ua()}}(jQuery);